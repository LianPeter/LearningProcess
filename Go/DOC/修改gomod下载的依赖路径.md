# 修改gomod下载的依赖路径

## 简介

在 `Go` 中，`go mod` 会将依赖项下载并存储在本地的模块缓存中。默认情况下，这些依赖项会存储在 `$GOPATH/pkg/mod` 目录下。如果想要修改本地 `gomod` 下载的依赖存储路径，可以通过设置环境变量 GOMODCACHE 来实现。

在Windows中，我们为了保证系统正常运行，C盘一般不会存储太多东西，但如果你没有自定义设置 `go mod` 下载依赖的路径，则系统会将依赖自动保存在c盘，所以时间久了以后，容易将C盘占满。因此，将以手动修改`go mod` 下载依赖的路径。

想要自定义保存路径，简单来讲就是设置环境变量 `GOMODCACHE` 指向指定的文件夹路径，如果你了解环境变量的设置，可以忽略下列教程直接设置，如果你不会环境变量的设置，可以向下看。

## Windows

在 `Windows` 环境下，你可以通过设置系统环境变量来修改 go mod 下载的依赖存储路径。以下是详细步骤：

打开系统环境变量设置：

1. 右键点击“此电脑”或“我的电脑”，选择“属性”。
2. 在系统属性窗口中，选择“高级系统设置”。
3. 在“系统属性”对话框中，点击“环境变量”按钮。
4. 添加或修改 `GOMODCACHE` 环境变量：

在环境变量窗口中，可以根据情况添加或修改用户变量或系统变量中的 `GOMODCACHE`。

1. 点击“新建”按钮，创建一个新的环境变量。
2. 在“变量名”框中输入 `GOMODCACHE`。
3. 在“变量值”框中输入你希望存储依赖项的路径，例如：`D:\GoModulesCache`。
4. 点击“确定”保存变量。

如果已经存在 `GOMODCACHE` 变量，可以选择它并点击“编辑”，然后修改变量值为你希望的路径。

应用并重启命令行窗口：

确保点击所有对话框中的“确定”按钮，以保存你的更改。然后，关闭并重新打开你的命令行窗口（如 `Command Prompt (cmd)` 或 `PowerShell`），以使新的环境变量生效。

现在，当你在命令行中运行 `go mod` 命令时，依赖项会下载并存储到你指定的新路径中。

## Linux

1. 设置 `GOMODCACHE` 环境变量：

你可以在终端中通过以下命令设置 `GOMODCACHE` 环境变量，将依赖存储路径改为你希望的路径。

```
sh
export GOMODCACHE=/your/custom/path
```

这会将依赖项存储到 `/your/custom/path` 目录下。

1. 在项目中使用新的依赖路径：

确保在你需要的终端会话或脚本中设置了 `GOMODCACHE` 环境变量，这样 `go mod` 在下载依赖项时会使用新的存储路径。

### 永久更改 `GOMODCACHE` 路径

如果你希望永久性地更改 `GOMODCACHE` 路径，可以将上述 `export` 命令添加到你的 `shell` 配置文件中，例如 `~/.bashrc`、`~/.zshrc` 等。添加完后，记得重新加载配置文件：

```
shsource ~/.bashrc   # 如果你使用的是 bash
source ~/.zshrc    # 如果你使用的是 zsh
```

完成上述步骤后，`go mod` 下载的依赖项会存储在你指定的新路径下。